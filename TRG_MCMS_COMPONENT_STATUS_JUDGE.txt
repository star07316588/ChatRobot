幫我寫一個Oracle的Trigger，命名為TRG_MCMS_COMPONENT_STATUS_JUDGE
tbl_mcms_component有五個欄位(TAPL_EFFECTIVE_DATE, TAPL_EXPIRE_DATE, APL_EFFECTIVE_DATE, APL_EXPIRE_DATE, STATUS)，所有欄位TYPE皆為VARCHAR2(8)，且TAPL_EFFECTIVE_DATE, TAPL_EXPIRE_DATE, APL_EFFECTIVE_DATE, APL_EXPIRE_DATE 皆為8碼日期
資料範例：20241129

當tbl_mcms_component Insert or Update 時
1, 若TAPL_EFFECTIVE_DATE, TAPL_EXPIRE_DATE, APL_EFFECTIVE_DATE皆為空值時，則STATUS = 'P'
2, 若TAPL_EXPIRE_DATE < 當天日期，且APL_EFFECTIVE_DATE, APL_EXPIRE_DATE皆為空值時，則STATUS = 'E'
3, 若APL_EXPIRE_DATE < 當天日期，則STATUS = 'E'
4, 其餘上述狀況，則STATUS = 'R'

CREATE OR REPLACE TRIGGER TRG_MCMS_COMPONENT_STATUS_JUDGE
BEFORE INSERT OR UPDATE ON tbl_mcms_component
FOR EACH ROW
DECLARE
    v_today VARCHAR2(8);
BEGIN
    -- 取得當天日期 (格式 YYYYMMDD)
    v_today := TO_CHAR(SYSDATE, 'YYYYMMDD');

    -- 邏輯判斷開始
    IF :NEW.TAPL_EFFECTIVE_DATE IS NULL 
       AND :NEW.TAPL_EXPIRE_DATE IS NULL 
       AND :NEW.APL_EFFECTIVE_DATE IS NULL THEN
        -- 1. 若 TAPL_EFFECTIVE_DATE, TAPL_EXPIRE_DATE, APL_EFFECTIVE_DATE 皆為空值
        :NEW.STATUS := 'P';

    ELSIF :NEW.TAPL_EXPIRE_DATE < v_today 
       AND :NEW.APL_EFFECTIVE_DATE IS NULL 
       AND :NEW.APL_EXPIRE_DATE IS NULL THEN
        -- 2. 若 TAPL_EXPIRE_DATE < 當天日期，且 APL_EFFECTIVE_DATE, APL_EXPIRE_DATE 皆為空值
        :NEW.STATUS := 'E';

    ELSIF :NEW.APL_EXPIRE_DATE < v_today THEN
        -- 3. 若 APL_EXPIRE_DATE < 當天日期
        :NEW.STATUS := 'E';

    ELSE
        -- 4. 其餘上述狀況
        :NEW.STATUS := 'R';
    END IF;
END;
/
